// Generated by CoffeeScript 1.6.3
(function() {
  var Worker, mongoose;

  mongoose = require('mongoose');

  Worker = mongoose.model('Worker');

  exports.index = function(req, res, next) {
    Worker.paginate(req, '_id').execPagination(function(err, result) {
      if (err != null) {
        return next(err);
      }
      if (result == null) {
        return next();
      }
      console.dir(result);
      res.render('workers/index', result);
    });
  };

  exports.create = function(req, res, next) {
    var ticket,
      _this = this;
    ticket = new Worker(req.body);
    ticket.save(function(err) {
      if (err != null) {
        return next(err);
      }
      switch (req.params.format) {
        case 'json':
          res.json(ticket);
          break;
        default:
          res.redirect("/workers");
      }
    });
  };

}).call(this);
